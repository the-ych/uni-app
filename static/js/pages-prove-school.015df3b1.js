(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-prove-school"],{"2b6f":function(e,t,a){"use strict";var n=a("dc0e"),i=a.n(n);i.a},"3f4f":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={uniForms:a("2cf2").default,uniFormsItem:a("11e2").default,uniEasyinput:a("dc3b").default,uniDataCheckbox:a("2235").default,uniCard:a("ce30").default,uniFilePicker:a("0df0").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticStyle:{"margin-top":"30rpx","margin-left":"30rpx","margin-right":"30rpx"}},[a("uni-forms",{ref:"form",staticStyle:{"margin-top":"50rpx"},attrs:{modelValue:e.formData,rules:e.rules}},[a("uni-forms-item",{attrs:{label:"學校",name:"name",required:!0}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"請輸入您的學校","suffix-icon":"false"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("uni-forms-item",{attrs:{label:"系名",name:"department",required:!0}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"請輸入您的「系」名稱","suffix-icon":"false"},model:{value:e.formData.department,callback:function(t){e.$set(e.formData,"department",t)},expression:"formData.department"}})],1),a("uni-forms-item",{attrs:{label:"教育程度",name:"department",required:!0}},[a("uni-data-checkbox",{attrs:{placeholder:"選擇你的教育程度",localdata:e.levelSelection},model:{value:e.formData.level,callback:function(t){e.$set(e.formData,"level",t)},expression:"formData.level"}})],1),a("uni-card",{attrs:{title:"上傳學生證圖片",isFull:!0}},[a("v-uni-view",{staticStyle:{padding:"10px","padding-top":"0"}},[a("uni-file-picker",{ref:"imageUploader",attrs:{fileMediatype:"image",limit:"1",title:"最多1張證明",mode:"grid",autoUpload:!1},on:{select:function(t){arguments[0]=t=e.$handleEvent(t),e.selectImg(t)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.delImg(t)}}})],1)],1)],1)],1),a("v-uni-view",{staticStyle:{width:"auto",position:"fixed",bottom:"0",left:"5rpx",right:"5rpx"}},[a("v-uni-button",{staticClass:"action-button",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交申請")])],1)],1)},r=[]},"6ece":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".content[data-v-7d2dea6a]{text-align:center;height:%?400?%;padding:%?10?%}.action-button[data-v-7d2dea6a]{margin:%?20?%}",""]),e.exports=t},"7e6e":function(e,t,a){"use strict";a.r(t);var n=a("3f4f"),i=a("b23f");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("2b6f");var o,l=a("f0c5"),u=Object(l["a"])(i["default"],n["b"],n["c"],!1,null,"7d2dea6a",null,!1,n["a"],o);t["default"]=u.exports},b23f:function(e,t,a){"use strict";a.r(t);var n=a("e6e4"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},dc0e:function(e,t,a){var n=a("6ece");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("d47fa2ee",n,!0,{sourceMap:!1,shadowMode:!1})},e6e4:function(e,t,a){"use strict";a("7a82");var n=a("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("ce30")),r={data:function(){return{levelSelection:[{value:"高中",text:"高中"},{value:"學士",text:"學士"},{value:"碩士",text:"碩士"},{value:"博士",text:"博士"}],formData:{name:"",department:"",level:""},rules:{name:{rules:[{required:!0,errorMessage:"請輸入學校名稱"}]},department:{rules:[{required:!0,errorMessage:"請輸入系所名稱"}]},level:{rules:[{required:!0,errorMessage:"請選擇教育程度"}]}},image:null}},components:{UniCard:i.default},methods:{submit:function(){this.$refs.form.validate();var e=this.formData,t=e.name,a=e.department,n=e.level;null!==this.image?(uni.showLoading({title:"上傳中"}),console.log(1),uni.uploadFile({url:"https://ychapi.hsuan.app/api/prove/school",header:{Accept:"application/json",Authorization:"Bearer ".concat(uni.getStorageSync("access_token"))},filePath:this.image,name:"proof",formData:{name:t,department:a,level:n},success:function(e){if(200!==e.statusCode)return uni.hideLoading(),void uni.showToast({title:e.data,icon:"error",mask:!0});uni.reLaunch({url:"/pages/me?action=toast&message=已提交申請"})},fail:function(e){uni.showToast({title:e,icon:"error",mask:!0})}})):uni.showToast({title:"上傳證明才能申請",icon:"error"})},selectImg:function(e){console.log(e),this.image=e.tempFilePaths[0]},delImg:function(e){this.image=null}}};t.default=r}}]);