(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chatList"],{"606d":function(t,e,n){"use strict";n("7a82");var a=n("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("4de4"),n("d3b7"),n("99af"),n("e9c4");var i=a(n("e74b")),r=a(n("197d")),o=a(n("cb4b")),c=a(n("c1df"));n("90ea"),c.default.locale("zh-tw");var u={name:"chatList",data:function(){return{chats:[],unreadCount:{},options:[],me:{}}},onLoad:function(){try{this.me=uni.getStorageSync("user")}catch(t){uni.reLaunch({url:"/pages/me?action=toast&message=您尚未登入&type=error"})}this.fetch()},methods:{fetch:function(){var t=this;(0,o.default)({url:"/api/chat/list",auth:!0,success:function(e){200!==e.statusCode?console.log(e.data.message):(t.unreadCount=e.data[1],t.chats=e.data[0].data)}})},makeNote:function(t){return null!==t&&void 0!==t&&t.body?t.sender.name+": "+t.body:"尚無訊息"},getFriend:function(t){var e=this;return t.filter((function(t){return t.messageable.id!==e.me.id}))[0].messageable},goto:function(t){var e=this.getFriend(t.conversation.participants);uni.navigateTo({url:"/pages/chat?id=".concat(t.conversation_id,"&friend=").concat(JSON.stringify(e))})},moment:c.default},components:{UniList:i.default,UniListItem:r.default}};e.default=u},"686f":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t.chats.length?a("uni-list",[t._l(t.chats,(function(e){return[a("uni-list-item",{key:e.id,attrs:{title:t.getFriend(e.conversation.participants).name,note:t.makeNote(e.conversation.last_message),thumb:t.getFriend(e.conversation.participants).avatar,"thumb-size":"lg","thumb-style":"border-radius: 50%;","badge-text":String(t.unreadCount[e.conversation.id].unread_count),"badge-type":"error",rightText:t.moment(e.updated_at).fromNow(),"right-text-style":"font-size: 20rpx;","show-badge":!0},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goto(e)}}})]}))],2):t._e(),0===t.chats.length?a("v-uni-view",{staticStyle:{"margin-top":"50%",display:"flex","align-self":"center","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("v-uni-image",{attrs:{src:n("f7ce")}}),a("v-uni-text",{staticClass:"uni-h6 block"},[t._v("目前沒有人陪你聊天ＱＱ")]),a("v-uni-text",{staticClass:"uni-h6 block"},[t._v("請持續翻卡卡")])],1):t._e()],1)},r=[]},a02b:function(t,e,n){"use strict";n.r(e);var a=n("606d"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},c80f:function(t,e,n){"use strict";n.r(e);var a=n("686f"),i=n("a02b");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var o,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"3c6d1ca7",null,!1,a["a"],o);e["default"]=u.exports},f7ce:function(t,e,n){t.exports=n.p+"static/img/logo.4f718b91.png"}}]);