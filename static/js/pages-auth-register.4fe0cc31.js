(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-auth-register"],{"1be0":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3");var i={name:"UniSteps",props:{direction:{type:String,default:"row"},activeColor:{type:String,default:"#2979FF"},deactiveColor:{type:String,default:"#B7BDC6"},active:{type:Number,default:0},activeIcon:{type:String,default:"checkbox-filled"},options:{type:Array,default:function(){return[]}}},data:function(){return{}}};t.default=i},"477a":function(e,t,n){"use strict";var i=n("a0af"),a=n.n(i);a.a},6367:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-steps[data-v-0e25ef43]{display:flex;width:100%;flex-direction:column}.uni-steps__row[data-v-0e25ef43]{display:flex;flex-direction:column}.uni-steps__column[data-v-0e25ef43]{display:flex;flex-direction:row-reverse}.uni-steps__row-text-container[data-v-0e25ef43]{display:flex;flex-direction:row;align-items:flex-end;margin-bottom:8px}.uni-steps__column-text-container[data-v-0e25ef43]{display:flex;flex-direction:column;flex:1}.uni-steps__row-text[data-v-0e25ef43]{display:inline-flex;flex:1;flex-direction:column}.uni-steps__column-text[data-v-0e25ef43]{padding:6px 0;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:#ededed;display:flex;flex-direction:column}.uni-steps__row-title[data-v-0e25ef43]{font-size:14px;line-height:16px;text-align:center}.uni-steps__column-title[data-v-0e25ef43]{font-size:14px;text-align:left;line-height:18px}.uni-steps__row-desc[data-v-0e25ef43]{font-size:12px;line-height:14px;text-align:center}.uni-steps__column-desc[data-v-0e25ef43]{font-size:12px;text-align:left;line-height:18px}.uni-steps__row-container[data-v-0e25ef43]{display:flex;flex-direction:row}.uni-steps__column-container[data-v-0e25ef43]{display:inline-flex;width:30px;flex-direction:column}.uni-steps__row-line-item[data-v-0e25ef43]{display:inline-flex;flex-direction:row;flex:1;height:14px;line-height:14px;align-items:center;justify-content:center}.uni-steps__column-line-item[data-v-0e25ef43]{display:flex;flex-direction:column;flex:1;align-items:center;justify-content:center}.uni-steps__row-line[data-v-0e25ef43]{flex:1;height:1px;background-color:#b7bdc6}.uni-steps__column-line[data-v-0e25ef43]{width:1px;background-color:#b7bdc6}.uni-steps__row-line--after[data-v-0e25ef43]{-webkit-transform:translateX(1px);transform:translateX(1px)}.uni-steps__column-line--after[data-v-0e25ef43]{flex:1;-webkit-transform:translateY(1px);transform:translateY(1px)}.uni-steps__row-line--before[data-v-0e25ef43]{-webkit-transform:translateX(-1px);transform:translateX(-1px)}.uni-steps__column-line--before[data-v-0e25ef43]{height:6px;-webkit-transform:translateY(-13px);transform:translateY(-13px)}.uni-steps__row-circle[data-v-0e25ef43]{width:5px;height:5px;border-radius:50%;background-color:#b7bdc6;margin:0 3px}.uni-steps__column-circle[data-v-0e25ef43]{width:5px;height:5px;border-radius:50%;background-color:#b7bdc6;margin:4px 0 5px 0}.uni-steps__row-check[data-v-0e25ef43]{margin:0 6px}.uni-steps__column-check[data-v-0e25ef43]{height:14px;line-height:14px;margin:2px 0}',""]),e.exports=t},6688:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={uniIcons:n("1a49").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"uni-steps"},[n("v-uni-view",{class:["column"===e.direction?"uni-steps__column":"uni-steps__row"]},[n("v-uni-view",{class:["column"===e.direction?"uni-steps__column-text-container":"uni-steps__row-text-container"]},e._l(e.options,(function(t,i){return n("v-uni-view",{key:i,class:["column"===e.direction?"uni-steps__column-text":"uni-steps__row-text"]},[n("v-uni-text",{class:["column"===e.direction?"uni-steps__column-title":"uni-steps__row-title"],style:{color:i===e.active?e.activeColor:e.deactiveColor}},[e._v(e._s(t.title))]),n("v-uni-text",{class:["column"===e.direction?"uni-steps__column-desc":"uni-steps__row-desc"],style:{color:e.deactiveColor}},[e._v(e._s(t.desc))])],1)})),1),n("v-uni-view",{class:["column"===e.direction?"uni-steps__column-container":"uni-steps__row-container"]},e._l(e.options,(function(t,i){return n("v-uni-view",{key:i,class:["column"===e.direction?"uni-steps__column-line-item":"uni-steps__row-line-item"]},[n("v-uni-view",{class:["column"===e.direction?"uni-steps__column-line":"uni-steps__row-line","column"===e.direction?"uni-steps__column-line--before":"uni-steps__row-line--before"],style:{backgroundColor:i<=e.active&&0!==i?e.activeColor:0===i?"transparent":e.deactiveColor}}),i===e.active?n("v-uni-view",{class:["column"===e.direction?"uni-steps__column-check":"uni-steps__row-check"]},[n("uni-icons",{attrs:{color:e.activeColor,type:e.activeIcon,size:"14"}})],1):n("v-uni-view",{class:["column"===e.direction?"uni-steps__column-circle":"uni-steps__row-circle"],style:{backgroundColor:i<e.active?e.activeColor:e.deactiveColor}}),n("v-uni-view",{class:["column"===e.direction?"uni-steps__column-line":"uni-steps__row-line","column"===e.direction?"uni-steps__column-line--after":"uni-steps__row-line--after"],style:{backgroundColor:i<e.active&&i!==e.options.length-1?e.activeColor:i===e.options.length-1?"transparent":e.deactiveColor}})],1)})),1)],1)],1)},r=[]},8871:function(e,t,n){"use strict";n.r(t);var i=n("a651"),a=n("9d4a");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("477a");var o,s=n("f0c5"),l=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"82e75778",null,!1,i["a"],o);t["default"]=l.exports},9814:function(e,t,n){"use strict";n.r(t);var i=n("1be0"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},"9d4a":function(e,t,n){"use strict";n.r(t);var i=n("fba1"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},a0af:function(e,t,n){var i=n("ffa5");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("52b37afe",i,!0,{sourceMap:!1,shadowMode:!1})},a55e:function(e,t,n){"use strict";var i=n("cf47"),a=n.n(i);a.a},a651:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={uniSteps:n("ee68").default,uniForms:n("2cf2").default,uniFormsItem:n("11e2").default,uniEasyinput:n("dc3b").default,uniDataCheckbox:n("2235").default,uniCard:n("ce30").default,uniFilePicker:n("0df0").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticStyle:{"margin-top":"30rpx","margin-left":"30rpx","margin-right":"30rpx"}},[n("uni-steps",{attrs:{options:e.steps,active:e.currentStep}}),n("uni-forms",{ref:"form",staticStyle:{"margin-top":"50rpx"},attrs:{modelValue:e.formData,rules:e.rules}},[0===e.currentStep?n("v-uni-view",[n("uni-forms-item",{attrs:{label:"信箱",name:"email",required:!0}},[n("uni-easyinput",{attrs:{type:"text",placeholder:"請輸入電子郵件"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),n("uni-forms-item",{attrs:{label:"密碼",name:"password",required:!0}},[n("uni-easyinput",{attrs:{type:"password",placeholder:"請輸入密碼"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1):e._e(),1===e.currentStep?n("v-uni-view",[n("uni-forms-item",{attrs:{label:"姓名",name:"name",required:!0}},[n("uni-easyinput",{attrs:{type:"text",placeholder:"請輸入您的姓名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),n("uni-forms-item",{attrs:{label:"性別",name:"gender",required:!0}},[n("uni-data-checkbox",{attrs:{placeholder:"選擇你的性別",localdata:e.genderSelection},model:{value:e.formData.gender,callback:function(t){e.$set(e.formData,"gender",t)},expression:"formData.gender"}})],1),n("uni-forms-item",{attrs:{label:"自我介绍",name:"introduction",required:!0}},[n("uni-easyinput",{attrs:{type:"textarea",placeholder:"簡單介紹一下自己吧","suffix-icon":"false"},model:{value:e.formData.introduction,callback:function(t){e.$set(e.formData,"introduction",t)},expression:"formData.introduction"}})],1)],1):e._e(),2===e.currentStep?n("v-uni-view",[n("uni-card",{attrs:{title:"選擇要顯示的照片 (至少一張*)",isFull:!0}},[n("v-uni-view",{staticStyle:{padding:"10px","padding-top":"0"}},[n("uni-file-picker",{ref:"imageUploader",attrs:{fileMediatype:"image",limit:"3",title:"最多3張照片",mode:"grid",autoUpload:!1},on:{select:function(t){arguments[0]=t=e.$handleEvent(t),e.selectImg(t)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.delImg(t)}}})],1)],1)],1):e._e()],1)],1),n("v-uni-view",{staticStyle:{width:"auto",position:"fixed",bottom:"0",left:"5rpx",right:"5rpx"}},[0!==e.currentStep?n("v-uni-button",{staticClass:"action-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.currentStep--,e.images=[]}}},[e._v("上一步")]):e._e(),e.currentStep!==e.steps.length-1?n("v-uni-button",{staticClass:"action-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.currentStep++}}},[e._v("下一步")]):e._e(),e.currentStep===e.steps.length-1?n("v-uni-button",{staticClass:"action-button",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")]):e._e()],1)],1)},r=[]},cf47:function(e,t,n){var i=n("6367");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("586f1bf4",i,!0,{sourceMap:!1,shadowMode:!1})},ee68:function(e,t,n){"use strict";n.r(t);var i=n("6688"),a=n("9814");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("a55e");var o,s=n("f0c5"),l=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"0e25ef43",null,!1,i["a"],o);t["default"]=l.exports},fba1:function(e,t,n){"use strict";n("7a82");var i=n("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d3b7"),n("159b"),n("99af"),n("4de4");var a=i(n("cb4b")),r={data:function(){return{title:"登入 / 註冊",genderSelection:[{value:"男",text:"男生"},{value:"女",text:"女生"}],formData:{name:"",email:"",password:"",gender:"男",introduction:""},rules:{name:{rules:[{required:!0,errorMessage:"請輸入姓名"},{minLength:2,maxLength:4,errorMessage:"名字長度在 2 ~ 4 個字才正常"}]},email:{rules:[{required:!0,format:"email",errorMessage:"請輸入正確的電子信箱"}]},password:{rules:[{required:!0,errorMessage:"請輸入密碼"}]},gender:{rules:[{required:!0,errorMessage:"請選擇性別"}]},introduction:{rules:[{required:!0,errorMessage:"請輸入自我介紹"}]}},images:[],steps:[{title:"帳號資料"},{title:"基本資料"},{title:"上傳照片"}],currentStep:0,device_name:""}},onLoad:function(e){var t=this;this.formData.email=e.email,this.formData.password=e.password,uni.getSystemInfo({success:function(e){t.device_name=(e.brand?e.brand:"")+(e.model?e.model:"")+" "+(e.deviceId?e.deviceId:"")}})},methods:{submit:function(){var e=this;this.$refs.form.validate();var t=this.formData,n=t.name,i=t.email,r=t.gender,o=t.password,s=t.introduction;0!==this.images.length?(uni.showLoading({title:"上傳中"}),(0,a.default)({url:"/api/auth/register",header:{Accept:"application/json"},method:"POST",data:{name:n,email:i,password:o,gender:r,introduction:s,device_name:this.device_name},success:function(t){if(200===t.statusCode){uni.setStorageSync("access_token",t.data.access_token),uni.setStorageSync("user",t.data.data);var n=0,i=e.images.length;e.images.forEach((function(e){uni.uploadFile({url:"https://ychapi.hsuan.app/api/photo",header:{Accept:"application/json",Authorization:"Bearer ".concat(uni.getStorageSync("access_token"))},filePath:e,name:"photo",complete:function(){n===i-1?uni.reLaunch({url:"/pages/me?action=toast&message=註冊成功"}):n++},fail:function(e){uni.showToast({title:e,icon:"error",mask:!0})}})}))}else uni.showToast({title:t.data.message,icon:"error",mask:!0}),uni.hideLoading({title:"上傳中"})},fail:function(e){uni.showToast({title:e,icon:"error",mask:!0}),uni.hideLoading({title:"上傳中"})}})):uni.showToast({title:"至少上傳一張照片才能註冊",icon:"error"})},selectImg:function(e){this.images=this.images.concat(e.tempFilePaths)},delImg:function(e){this.images=this.images.filter((function(t){return t!==e.tempFilePath}))}}};t.default=r},ffa5:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".content[data-v-82e75778]{text-align:center;height:%?400?%;padding:%?10?%}.action-button[data-v-82e75778]{margin:%?20?%}",""]),e.exports=t}}]);